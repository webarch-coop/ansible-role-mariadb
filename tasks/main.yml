---
- name: mariadb-server, mariadb-client and other packages present
  apt:
    pkg: 
      - mariadb-server
      - mariadb-client
      - mysqltuner
      - pwgen
      - python-mysqldb
    state: latest
    update_cache: yes
  tags:
    - mariadb

- name: MariaDB defaults updated
  template:
    src: templates/50-server.cnf.j2
    dest: /etc/mysql/mariadb.conf.d/50-server.cnf
  tags:
    - mariadb

- name: Conditionally include the user and database creation tasks 
  include_tasks: mariadb.yml
  when: mariadb_username is defined and mariadb_username != ""
  tags:
    - mariadb
